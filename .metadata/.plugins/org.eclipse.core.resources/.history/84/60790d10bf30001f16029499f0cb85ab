package Conectar.Proyecto;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

import javax.swing.JOptionPane;

public class ConexionBD {
    // Variables para la conexión
    private String url = "jdbc:mysql://localhost:3306/bdtallerverano";
    private String usuario = "root";
    private String password = "992478429xX@"; // Tu contraseña aquí
    private Connection con;

    // Método para establecer la conexión
    public Connection ConexionMysql() {
        try {
            // Paso 1: Cargar el driver JDBC para MySQL
            Class.forName("com.mysql.jdbc.Driver");
            
            // Paso 2: Establecer la conexión con la base de datos
            con = DriverManager.getConnection(url, usuario, password);

            // Paso 3: Verificar si la conexión fue exitosa
            if (con != null) {
                System.out.println("Conexión exitosa a la base de datos!");
            } else {
                System.out.println("Error al conectarse a la base de datos!");
            }
        } catch (ClassNotFoundException e) {
            // Error en caso de que no se encuentre el driver
            e.printStackTrace();
        } catch (SQLException e) {
            // Error en caso de problemas con la conexión SQL
            e.printStackTrace();
        }

        // Retornar el objeto de conexión
        return con;
    }

    // Método para cerrar la conexión
    public void cerrarConexion() {
        try {
            if (con != null && !con.isClosed()) {
                con.close();
                System.out.println("Conexión cerrada correctamente.");
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    // Método main para probar la conexión (opcional)
    public static void main(String[] args) {
        ConexionBD conexionBD = new ConexionBD();
        Connection con = conexionBD.ConexionMysql();

        // Ejemplo de cómo usar la conexión (opcional)
        // Aquí podrías ejecutar consultas u otras operaciones con la base de datos

        // Cerrar la conexión al finalizar (importante para liberar recursos)
        conexionBD.cerrarConexion();
    }
}